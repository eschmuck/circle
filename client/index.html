<!doctype html>
<html lang="en" ng-app>
  <head>
    <title>Circle 4.0</title>

    <link href="/css/jquery.terminal.css" rel="stylesheet" />
  </head>
  <body>
    
    <script src="/socket.io/socket.io.js"></script>
    <script src="/js/jquery-1.7.1.min.js"></script>
    <script src="/js/jquery.mousewheel-min.js"></script>
    <script src="/js/jquery.terminal-min.js"></script>
    
    <script>
    
        var socket = io.connect();

        socket.on('message', function(data) {
          if(data['prompt'] !== undefined) {
            $('body').terminal(this).set_prompt(data['prompt']);
          }
          
          if(data['color'] !== undefined) {
            $('body').terminal(this).echo(data['message'], { 
              finalize: function (div) {
                div.css('color', data['color']);
              }
            });
          }
          else {
            $('body').terminal(this).echo(data['message']);
          }
        });

        jQuery(document).ready(function ($) {
            $('body').terminal(function (command, terminal) {
                socket.emit('message', { input: command });
            }, {
                greetings: false,
                prompt: '> '
            });
        });
        
    </script>
  </body>
</html>
